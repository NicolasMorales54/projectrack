<form [formGroup]="form" (ngSubmit)="submit()" class="bg-white shadow mx-auto p-6 rounded max-w-lg">
  <h2 class="mb-4 font-bold text-black text-2xl">Editar Proyecto</h2>

  <div class="mb-4">
    <label class="block mb-1 font-semibold text-black">Nombre <span class="text-black text-red-500">*</span></label>
    <input type="text" formControlName="nombre" class="px-3 py-2 border rounded w-full"
      [class.border-red-500]="nombre?.invalid && (nombre?.touched || nombre?.dirty)" />
    <div *ngIf="nombre?.invalid && (nombre?.touched || nombre?.dirty)" class="mt-1 text-red-500 text-sm">
      <div *ngIf="nombre?.errors?.['required']">El nombre es obligatorio.</div>
      <div *ngIf="nombre?.errors?.['minlength']">Mínimo 3 caracteres.</div>
      <div *ngIf="nombre?.errors?.['maxlength']">Máximo 255 caracteres.</div>
    </div>
  </div>

  <div class="mb-4">
    <label class="block mb-1 font-semibold text-black">Descripción</label>
    <textarea formControlName="descripcion" class="px-3 py-2 border rounded w-full"></textarea>
  </div>

  <div class="mb-4">
    <label class="block mb-1 font-semibold text-black">Fecha de inicio</label>
    <input type="date" formControlName="fechaInicio" class="px-3 py-2 border rounded w-full" />
  </div>

  <div class="mb-4">
    <label class="block mb-1 font-semibold text-black">Fecha de fin</label>
    <input type="date" formControlName="fechaFin" class="px-3 py-2 border rounded w-full" />
  </div>

  <div class="mb-4">
    <label class="block mb-1 font-semibold text-black">Estado</label>
    <select formControlName="estado" class="px-3 py-2 border rounded w-full">
      <option value="">-- Selecciona un estado --</option>
      <option *ngFor="let entry of estadoProyectoEntries" [value]="entry[1]">{{ entry[1] }}</option>
    </select>
  </div>

  <div *ngIf="error" class="mb-4 text-red-600">{{ error }}</div>

  <button type="submit" class="bg-blue-600 px-4 py-2 rounded text-black" [disabled]="loading">
    <span *ngIf="loading" class="mr-2 text-black animate-spin">⏳</span>
    Guardar Cambios
  </button>
</form>
